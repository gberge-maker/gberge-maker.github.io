CTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retórica Ultra - PAU 2025</title>
    <!-- Librerías fundamentales vía CDN -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #020617; margin: 0; }
        .perspective-1000 { perspective: 1000px; }
        .backface-hidden { backface-visibility: hidden; }
        .transform-style-3d { transform-style: preserve-3d; }
        .rotate-y-180 { transform: rotateY(180deg); }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .shake { animation: shake 0.5s linear; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #020617; }
        ::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
    </style>
</head>
<body class="text-slate-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // Iconos SVG integrados para máxima compatibilidad
        const Icons = {
            Sparkles: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4M19 17v4M3 5h4M17 19h4"/></svg>,
            Zap: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 14.71 14 3l-3 9h9l-10 11.71 3-9H4Z"/></svg>,
            Repeat: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m17 2 4 4-4 4M3 11v-1a4 4 0 0 1 4-4h14m-14 16-4-4 4-4m14 9v1a4 4 0 0 1-4 4H3"/></svg>,
            Book: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/></svg>,
            Search: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>,
            Trophy: () => <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6M18 9h1.5a2.5 2.5 0 0 0 0-5H18M4 22h16M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>,
            X: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18M6 6 12 12"/></svg>,
            Graduation: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5zM6 12v5c0 2 2 3 6 3s6-1 6-3v-5"/></svg>,
            Keyboard: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="M6 8h.01M10 8h.01M14 8h.01M18 8h.01M6 12h.01M18 12h.01M10 12h.01M14 12h.01M8 16h8"/></svg>
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('sintaxis');
            const [searchTerm, setSearchTerm] = useState('');
            const [quizMode, setQuizMode] = useState(false);
            const [quizType, setQuizType] = useState('choice'); 
            const [score, setScore] = useState(0);
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [showResult, setShowResult] = useState(null);
            const [quizFinished, setQuizFinished] = useState(false);
            const [questions, setQuestions] = useState([]);
            const [userInput, setUserInput] = useState('');
            const [matchingPairs, setMatchingPairs] = useState([]);
            const [selectedExample, setSelectedExample] = useState(null);
            const [selectedTerm, setSelectedTerm] = useState(null);
            const [flashcardIndex, setFlashcardIndex] = useState(0);
            const [isFlipped, setIsFlipped] = useState(false);

            const categorias = {
                sintaxis: [
                    {
                        grupo: "Repetición y Ritmo (Nivel Fónico)",
                        color: "bg-blue-500",
                        items: [
                            { nombre: "Aliteración", def: "Repetición de sonidos similares para evocar una sensación.", ej: "En el silencio solo se escuchaba / un susurro de abejas que sonaba.", maestro: "Imita la realidad mediante el sonido (la 's' imita el siseo).", ejAlt: "A las aladas almas de las rosas.", icon: <Icons.Zap /> },
                            { nombre: "Anadiplosis", def: "Repetición de la última palabra de un verso al principio del siguiente.", ej: "Nadie establece leyes en la guerra; / la guerra que yo hago es de paciencia.", maestro: "Crea un efecto de encadenamiento o cascada lógica.", ejAlt: "La plaza tiene una torre, / la torre tiene un balcón.", icon: <Icons.Repeat /> },
                            { nombre: "Anáfora", def: "Repetición de palabras al comienzo de varios versos.", ej: "Temprano levantó la muerte el vuelo / temprano madrugó la madrugada.", maestro: "Genera un ritmo insistente y obsesivo.", ejAlt: "Pena con pena y pena desayuno...", icon: <Icons.Repeat /> },
                            { nombre: "Paralelismo", def: "Repetición de una misma estructura sintáctica.", ej: "La tierra más que el cuerpo se resiente; / la sangre más que el alma se dilata.", maestro: "Busca funciones gramaticales gemelas.", ejAlt: "Que te quiero por tu mirada...", icon: <Icons.Repeat /> },
                            { nombre: "Políptoton", def: "Uso de una misma palabra con diferentes accidentes gramaticales.", ej: "No me mires, que miran / que nos miramos.", maestro: "Juego de ingenio con las flexiones de la palabra.", ejAlt: "¿Cómo quieres que te quiera...?", icon: <Icons.Repeat /> },
                            { nombre: "Epanadiplosis", def: "Repetición de la misma palabra al principio y al final de un verso.", ej: "Verde que te quiero verde.", maestro: "Crea un círculo perfecto de pensamiento.", ejAlt: "Última amada, última.", icon: <Icons.Repeat /> },
                            { nombre: "Epífora", def: "Repetición de palabras al final de versos consecutivos.", ej: "No decía palabras / acercaba tan solo un cuerpo como un cuerpo.", maestro: "Enfatiza el cierre de cada unidad poética.", ejAlt: "Todo el mundo lo sabe...", icon: <Icons.Repeat /> }
                        ]
                    },
                    {
                        grupo: "Orden y Estructura",
                        color: "bg-indigo-600",
                        items: [
                            { nombre: "Hipérbaton", def: "Alteración del orden lógico gramatical de las palabras.", ej: "Volverán las oscuras golondrinas / en tu balcón sus nidos a colgar.", maestro: "Imita la sintaxis latina para dar elegancia y dificultad.", ejAlt: "Del salón en el ángulo oscuro...", icon: <Icons.Repeat /> },
                            { nombre: "Quiasmo", def: "Ordenación cruzada de elementos: A-B / B-A.", ej: "Ni son todos los que están, / ni están todos los que son.", maestro: "Se cruzan estructuras como en una 'X'.", ejAlt: "Cuando busco no hallo...", icon: <Icons.Repeat /> },
                            { nombre: "Paronomasia", def: "Uso de palabras de sonido similar pero distinto significado.", ej: "Vendado que me has vendido.", maestro: "Crea sorpresa y juego fonético ingenioso.", ejAlt: "Entre casar y cansar.", icon: <Icons.Repeat /> },
                            { nombre: "Enumeración", def: "Acumulación de elementos para describir un concepto.", ej: "En tierra, en humo, en polvo, en sombra, en nada.", maestro: "Da visión de conjunto o degradación.", ejAlt: "Día, noche, poniente...", icon: <Icons.Repeat /> }
                        ]
                    },
                    {
                        grupo: "Adición u Omisión",
                        color: "bg-cyan-500",
                        items: [
                            { nombre: "Asíndeton", def: "Omisión de nexos para dar rapidez.", ej: "Llegué, vi, vencí.", maestro: "Elimina las conjunciones para dar dinamismo.", ejAlt: "Rinde, pasa, pisa, triunfa.", icon: <Icons.Repeat /> },
                            { nombre: "Polisíndeton", def: "Repetición de conjunciones para dar lentitud o énfasis.", ej: "Y ríe, y llora, y aborrece, y ama.", maestro: "Obliga a detenerse en cada palabra.", ejAlt: "Soy un fue y un será...", icon: <Icons.Zap /> },
                            { nombre: "Zeugma", def: "Un elemento omitido se sobrentiende por aparecer antes.", ej: "La niña es rubia; el niño, moreno.", maestro: "Economía de lenguaje extrema.", ejAlt: "Frida pintaba cuadros; Diego, murales.", icon: <Icons.Repeat /> },
                            { nombre: "Pleonasmo", def: "Adición de términos innecesarios para reforzar.", ej: "Lo vi con mis propios ojos.", maestro: "Da máxima contundencia expresiva.", ejAlt: "¡Cállate la boca!", icon: <Icons.Book /> }
                        ]
                    }
                ],
                semantica: [
                    {
                        grupo: "Relaciones de Significado (Tropos)",
                        color: "bg-rose-500",
                        items: [
                            { nombre: "Metáfora", def: "Identificación de un término real con uno imaginario.", ej: "Las perlas de tu boca.", maestro: "No usa 'como'. Identidad total subjetiva.", ejAlt: "El oro de sus cabellos.", icon: <Icons.Sparkles /> },
                            { nombre: "Metonimia", def: "Sustitución basada en relaciones de proximidad.", ej: "Se lee a Cervantes.", maestro: "Sustituye autor por obra o continente por contenido.", ejAlt: "Se tomó una copa.", icon: <Icons.Repeat /> },
                            { nombre: "Símil o comparación", def: "Comparación explícita mediante nexos (como).", ej: "Tus ojos son como luceros.", maestro: "Relación de semejanza con nexo gramatical.", ejAlt: "Manso como un cordero.", icon: <Icons.Sparkles /> },
                            { nombre: "Sinestesia", def: "Atribución de una sensación a un sentido distinto.", ej: "Escucho con los ojos a los muertos.", maestro: "Mezcla impresiones: color chillón, voz dulce.", ejAlt: "Voz aterciopelada.", icon: <Icons.Zap /> },
                            { nombre: "Hipálage", def: "Atribuir un adjetivo a un sustantivo que no le corresponde.", ej: "El oro temeroso de la tumba.", maestro: "El adjetivo se 'desplaza' del dueño real.", ejAlt: "Gradas ruidosas.", icon: <Icons.Book /> }
                        ]
                    },
                    {
                        grupo: "Figuras de Pensamiento",
                        color: "bg-amber-500",
                        items: [
                            { nombre: "Hipérbole", def: "Exageración de la realidad.", ej: "Érase un hombre a una nariz pegado.", maestro: "Dibuja una realidad imposible para impactar.", ejAlt: "Te lo he dicho mil veces.", icon: <Icons.Sparkles /> },
                            { nombre: "Personificación", def: "Atribuir rasgos humanos a objetos.", ej: "La lluvia lloraba sobre el cristal.", maestro: "Dota de alma a lo inanimado.", ejAlt: "El sol me sonríe.", icon: <Icons.Sparkles /> },
                            { nombre: "Antítesis", def: "Oposición de dos ideas empleando antónimos.", ej: "Es tan corto el amor y tan largo el olvido.", maestro: "Enfrenta dos conceptos contrarios.", ejAlt: "Yo velo mientras tú duermes.", icon: <Icons.Repeat /> },
                            { nombre: "Paradoja", def: "Unión de ideas contradictorias con sentido profundo.", ej: "Vivo sin vivir en mí.", maestro: "Esconde una verdad espiritual oculta.", ejAlt: "Solo sé que no sé nada.", icon: <Icons.Zap /> },
                            { nombre: "Oxímoron", def: "Contradicción entre dos términos contiguos.", ej: "Hielo abrasador.", maestro: "Sustantivo y adjetivo que se niegan.", ejAlt: "Silencio atronador.", icon: <Icons.Repeat /> },
                            { nombre: "Epíteto", def: "Adjetivo que expresa una cualidad intrínseca.", ej: "Blanca nieve.", maestro: "Embellece y enfatiza lo obvio.", ejAlt: "Oscura noche.", icon: <Icons.Sparkles /> },
                            { nombre: "Apóstrofe", def: "Invocación apasionada a seres reales o imaginarios.", ej: "¡Oh noche que guiaste!", maestro: "El autor se dirige directamente a algo ausente.", ejAlt: "¡Oh capitán!", icon: <Icons.Repeat /> },
                            { nombre: "Eufemismo", def: "Expresión suave para sustituir algo duro.", ej: "Pasó a mejor vida.", maestro: "Maquillaje del lenguaje para evitar el tabú.", ejAlt: "Conflicto armado.", icon: <Icons.Book /> },
                            { nombre: "Interrogación retórica", def: "Pregunta que no busca respuesta.", ej: "¿Qué se hicieron las damas, sus tocados?", maestro: "Es una afirmación que busca reflexionar.", ejAlt: "¿Acaso no somos iguales?", icon: <Icons.Keyboard /> },
                            { nombre: "Ironía", def: "Dar a entender lo contrario de lo que se dice.", ej: "¡Qué buena suerte tengo! (tras un fallo).", maestro: "Requiere que el lector entienda el sarcasmo.", ejAlt: "¡Qué puntual eres!", icon: <Icons.Keyboard /> },
                            { nombre: "Lítote o atenuación", def: "Negar lo contrario de lo que se desea afirmar.", ej: "No es poco inteligente.", maestro: "Decir 'no es malo' por decir 'es bueno'.", ejAlt: "No estás lejos de la verdad.", icon: <Icons.Repeat /> }
                        ]
                    }
                ]
            };

            const figurasOficiales = useMemo(() => {
                return [...categorias.sintaxis, ...categorias.semantica].flatMap(g => g.items.map(i => i.nombre));
            }, []);

            const masterBank = useMemo(() => {
                return [...categorias.sintaxis, ...categorias.semantica].flatMap(g => g.items).map(item => ({
                    q: item.ej,
                    correct: item.nombre
                }));
            }, []);

            const getOptions = (correct) => {
                let filtered = figurasOficiales.filter(f => f !== correct);
                let shuffled = filtered.sort(() => 0.5 - Math.random()).slice(0, 2);
                return [...shuffled, correct].sort();
            };

            const startQuiz = (type) => {
                const shuffled = [...masterBank].sort(() => 0.5 - Math.random()).slice(0, 10);
                if (type === 'matching') {
                    setMatchingPairs([...shuffled].slice(0, 5));
                } else if (type === 'flashcards') {
                    setQuestions(shuffled);
                    setFlashcardIndex(0);
                    setIsFlipped(false);
                } else {
                    setQuestions(shuffled.map(item => ({ ...item, options: getOptions(item.correct) })));
                }
                setQuizType(type);
                setQuizMode(true);
                setScore(0);
                setCurrentQuestion(0);
                setQuizFinished(false);
                setShowResult(null);
                setUserInput('');
                setSelectedExample(null);
                setSelectedTerm(null);
            };

            useEffect(() => {
                if (selectedExample && selectedTerm) {
                    if (selectedExample.correct === selectedTerm.correct) {
                        setScore(prev => prev + 1);
                        const qToRemove = selectedExample.q;
                        setTimeout(() => {
                            setMatchingPairs(prev => prev.filter(p => p.q !== qToRemove));
                            setSelectedExample(null);
                            setSelectedTerm(null);
                        }, 300);
                    } else {
                        setShowResult('incorrect');
                        setTimeout(() => {
                            setShowResult(null);
                            setSelectedExample(null);
                            setSelectedTerm(null);
                        }, 600);
                    }
                }
            }, [selectedExample, selectedTerm]);

            useEffect(() => {
                if (quizType === 'matching' && quizMode && matchingPairs.length === 0 && !quizFinished) {
                    setQuizFinished(true);
                }
            }, [matchingPairs, quizType, quizMode, quizFinished]);

            const handleChoice = (opt) => {
                if (opt === questions[currentQuestion].correct) {
                    setScore(score + 1);
                    setShowResult('correct');
                } else {
                    setShowResult('incorrect');
                }
                setTimeout(() => {
                    setShowResult(null);
                    if (currentQuestion < questions.length - 1) setCurrentQuestion(currentQuestion + 1);
                    else setQuizFinished(true);
                }, 600);
            };

            if (quizMode) {
                return (
                    <div className="min-h-screen bg-slate-950 p-4 md:p-10 flex flex-col items-center">
                        <div className="w-full max-w-4xl bg-slate-900 border border-white/10 rounded-[2rem] md:rounded-[3rem] p-6 md:p-12 relative overflow-hidden shadow-2xl">
                            <button onClick={() => setQuizMode(false)} className="absolute top-6 right-6 text-slate-500 hover:text-white transition-colors p-2 hover:bg-white/10 rounded-full z-50">
                                <Icons.X />
                            </button>

                            {!quizFinished ? (
                                <div className="fade-in">
                                    {showResult && (
                                        <div className="absolute inset-0 z-40 flex items-center justify-center backdrop-blur-sm bg-slate-950/40">
                                            <div className={`text-9xl font-bold ${showResult === 'correct' ? 'text-emerald-500' : 'text-rose-500'}`}>
                                                {showResult === 'correct' ? '✓' : '✗'}
                                            </div>
                                        </div>
                                    )}

                                    {quizType === 'flashcards' ? (
                                        <div className="flex flex-col items-center">
                                            <span className="bg-purple-500/20 px-4 py-2 rounded-full font-bold text-purple-400 text-xs tracking-widest uppercase mb-8">Tarjeta {flashcardIndex + 1} / 10</span>
                                            <div className="w-full max-w-md aspect-[4/3] cursor-pointer perspective-1000 group" onClick={() => setIsFlipped(!isFlipped)}>
                                                <div className={`relative w-full h-full transition-all duration-500 transform-style-3d ${isFlipped ? 'rotate-y-180' : ''}`}>
                                                    <div className="absolute inset-0 backface-hidden bg-slate-800 rounded-[2rem] border border-white/10 flex flex-col items-center justify-center p-8 text-center">
                                                        <p className="text-xl md:text-2xl font-serif italic text-white mb-6">"{questions[flashcardIndex]?.q}"</p>
                                                        <div className="text-slate-500 text-xs font-bold uppercase tracking-widest">Tocar para revelar</div>
                                                    </div>
                                                    <div className="absolute inset-0 backface-hidden rotate-y-180 bg-indigo-600 rounded-[2rem] flex flex-col items-center justify-center p-8 text-center">
                                                        <h4 className="text-3xl md:text-4xl font-black text-white uppercase">{questions[flashcardIndex]?.correct}</h4>
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="flex gap-4 mt-12 w-full max-w-md">
                                                <button onClick={(e) => {e.stopPropagation(); setFlashcardIndex(Math.max(0, flashcardIndex-1)); setIsFlipped(false);}} className="flex-1 py-4 bg-white/5 rounded-2xl font-bold">Anterior</button>
                                                <button onClick={(e) => {e.stopPropagation(); if(flashcardIndex < 9) {setFlashcardIndex(flashcardIndex+1); setIsFlipped(false);} else setQuizFinished(true);}} className="flex-1 py-4 bg-indigo-600 rounded-2xl font-black">Siguiente</button>
                                            </div>
                                        </div>
                                    ) : quizType === 'matching' ? (
                                        <div className="flex flex-col">
                                            <div className="flex justify-between items-center mb-8">
                                                <h3 className="text-indigo-400 font-bold uppercase tracking-widest text-sm">Actividad: Emparejar</h3>
                                                <span className="text-slate-400 font-bold">Pares: {matchingPairs.length}</span>
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-10">
                                                <div className="space-y-4">
                                                    <h4 className="text-xs font-black uppercase text-slate-500 mb-4 tracking-widest">Fragmentos</h4>
                                                    {matchingPairs.map((pair, idx) => (
                                                        <button key={`q-${idx}`} onClick={() => setSelectedExample(selectedExample?.q === pair.q ? null : pair)} className={`w-full p-6 rounded-2xl border text-left transition-all ${selectedExample?.q === pair.q ? 'bg-indigo-600 border-indigo-400 scale-[1.02]' : 'bg-slate-800 border-white/5 hover:bg-slate-700'}`}>
                                                            <p className="italic font-serif text-lg leading-snug">"{pair.q}"</p>
                                                        </button>
                                                    ))}
                                                </div>
                                                <div className="space-y-4">
                                                    <h4 className="text-xs font-black uppercase text-slate-500 mb-4 tracking-widest">Figuras</h4>
                                                    {[...matchingPairs].sort((a,b) => a.correct.localeCompare(b.correct)).map((pair, idx) => (
                                                        <button key={`c-${idx}`} onClick={() => setSelectedTerm(selectedTerm?.correct === pair.correct ? null : pair)} className={`w-full p-6 min-h-[80px] rounded-2xl border text-center font-black text-xl transition-all ${selectedTerm?.correct === pair.correct ? 'bg-indigo-600 border-indigo-400 scale-[1.02]' : 'bg-slate-800 border-white/5 hover:bg-slate-700'}`}>
                                                            {pair.correct}
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    ) : (
                                        <>
                                            <div className="flex justify-between items-center mb-8">
                                                <span className="text-indigo-400 font-bold uppercase tracking-widest text-sm">Pregunta {currentQuestion + 1} / 10</span>
                                                <span className="text-slate-400 font-bold">Puntos: {score}</span>
                                            </div>
                                            <div className="min-h-[160px] flex items-center justify-center text-center mb-12">
                                                <p className="text-2xl md:text-4xl font-serif italic text-white leading-relaxed">"{questions[currentQuestion]?.q}"</p>
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                                {questions[currentQuestion]?.options.map((opt, i) => (
                                                    <button key={i} onClick={() => handleChoice(opt)} className="py-5 px-6 rounded-2xl bg-slate-800 border border-white/5 hover:bg-indigo-600 hover:border-indigo-400 transition-all font-bold text-lg">{opt}</button>
                                                ))}
                                            </div>
                                        </>
                                    )}
                                </div>
                            ) : (
                                <div className="text-center py-10 flex flex-col items-center fade-in">
                                    <Icons.Trophy />
                                    <h2 className="text-4xl md:text-6xl font-black mb-6 mt-10 tracking-tighter">¡Sesión Completada!</h2>
                                    <p className="text-2xl text-slate-400 mb-12 font-medium">Resultado final: <span className="text-white font-black">{score}</span> aciertos.</p>
                                    <div className="flex flex-wrap justify-center gap-6">
                                        <button onClick={() => startQuiz(quizType)} className="bg-indigo-600 px-10 py-5 rounded-2xl font-black uppercase tracking-widest hover:scale-105 transition-all shadow-xl">Reiniciar</button>
                                        <button onClick={() => setQuizMode(false)} className="bg-slate-800 px-10 py-5 rounded-2xl font-black uppercase tracking-widest border border-white/10">Volver a la Guía</button>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                );
            }

            return (
                <div className="max-w-6xl mx-auto px-6 py-12 fade-in">
                    <header className="text-center mb-16">
                        <div className="inline-flex items-center gap-3 px-4 py-2 bg-indigo-500/10 border border-indigo-500/20 rounded-full mb-6 text-indigo-400 font-bold text-xs uppercase tracking-widest">
                            <Icons.Sparkles /> Preparación PAU 2025
                        </div>
                        <h1 className="text-5xl md:text-8xl font-black tracking-tighter mb-4 bg-clip-text text-transparent bg-gradient-to-b from-white to-slate-500">
                            RETÓRICA <span className="text-indigo-500 italic">ULTRA</span>
                        </h1>
                        <div className="mt-12 flex flex-wrap justify-center gap-3">
                            <button onClick={() => setActiveTab('sintaxis')} className={`px-6 py-3 rounded-2xl font-black uppercase transition-all ${activeTab === 'sintaxis' ? 'bg-indigo-600 shadow-lg' : 'bg-slate-800 text-slate-400 hover:bg-slate-700'}`}>Sintaxis</button>
                            <button onClick={() => setActiveTab('semantica')} className={`px-6 py-3 rounded-2xl font-black uppercase transition-all ${activeTab === 'semantica' ? 'bg-rose-600 shadow-lg' : 'bg-slate-800 text-slate-400 hover:bg-slate-700'}`}>Semántica</button>
                            <div className="w-px h-10 bg-white/10 mx-2 hidden md:block self-center"></div>
                            <button onClick={() => startQuiz('choice')} className="px-5 py-3 rounded-2xl font-black uppercase bg-emerald-600 text-white hover:scale-105 transition-all">Test</button>
                            <button onClick={() => startQuiz('matching')} className="px-5 py-3 rounded-2xl font-black uppercase bg-amber-600 text-white hover:scale-105 transition-all">Match</button>
                            <button onClick={() => startQuiz('flashcards')} className="px-5 py-3 rounded-2xl font-black uppercase bg-purple-600 text-white hover:scale-105 transition-all">Flashcards</button>
                        </div>
                    </header>

                    <div className="relative mb-16">
                        <div className="absolute left-6 top-1/2 -translate-y-1/2 text-slate-500">
                            <Icons.Search />
                        </div>
                        <input type="text" placeholder="Busca una figura o definición..." className="w-full bg-slate-900 border-2 border-white/5 focus:border-indigo-500 rounded-full py-6 pl-16 pr-8 outline-none text-xl transition-all" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} />
                    </div>

                    <div className="space-y-24">
                        {categorias[activeTab].map((grupo, gIdx) => {
                            const groupItems = grupo.items.filter(i => i.nombre.toLowerCase().includes(searchTerm.toLowerCase()) || i.def.toLowerCase().includes(searchTerm.toLowerCase()));
                            if (groupItems.length === 0) return null;
                            return (
                                <section key={gIdx} className="fade-in">
                                    <div className="flex items-center gap-6 mb-10">
                                        <div className={`h-12 w-2 rounded-full ${grupo.color}`}></div>
                                        <h2 className="text-3xl font-black tracking-tight uppercase text-white/90">{grupo.grupo}</h2>
                                    </div>
                                    <div className="grid grid-cols-1 gap-10">
                                        {groupItems.map((item, iIdx) => (
                                            <div key={iIdx} className="group bg-slate-900 border border-white/10 rounded-[2.5rem] p-8 md:p-12 hover:border-white/20 transition-all shadow-xl">
                                                <div className="flex flex-col lg:flex-row gap-12">
                                                    <div className="flex-1">
                                                        <div className={`mb-8 w-14 h-14 rounded-2xl flex items-center justify-center ${grupo.color} text-white shadow-xl`}>{item.icon}</div>
                                                        <h3 className="text-4xl font-black mb-4 text-white tracking-tight">{item.nombre}</h3>
                                                        <p className="text-slate-400 text-xl mb-10 leading-relaxed font-medium">{item.def}</p>
                                                        <div className="space-y-6">
                                                            <div className="bg-black/40 p-8 rounded-3xl border border-white/5 relative group/ej">
                                                                <span className="text-[10px] font-bold text-indigo-500 uppercase tracking-widest block mb-3">Ejemplo Principal</span>
                                                                <p className="text-indigo-50 italic text-2xl leading-snug">"{item.ej}"</p>
                                                            </div>
                                                            <div className="bg-white/5 p-8 rounded-3xl border border-white/5 border-dashed">
                                                                <span className="text-[10px] font-bold text-emerald-500 uppercase tracking-widest block mb-3">Ejemplo Alternativo</span>
                                                                <p className="text-emerald-50 italic text-xl">"{item.ejAlt}"</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div className="lg:w-1/3 bg-indigo-500/10 border border-indigo-500/20 rounded-[2.5rem] p-10 flex flex-col justify-center">
                                                        <div className="flex items-center gap-3 text-indigo-400 font-black uppercase text-xs tracking-widest mb-6">
                                                            <Icons.Graduation /> El Consejo del Maestro
                                                        </div>
                                                        <p className="text-slate-300 text-lg leading-relaxed italic font-medium">"{item.maestro}"</p>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </section>
                            );
                        })}
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
